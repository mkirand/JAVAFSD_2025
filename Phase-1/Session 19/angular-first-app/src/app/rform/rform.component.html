<div class="container">
    <h1>Reactive Model Form</h1>
    <div class="row">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="col-md-6 offset-3">

            <!-- Firstname -->
            <div class="form-group">
                <label>First Name</label>
                <input type="text" formControlName="firstname" class="form-control"
                    [ngClass]="{'is-invalid': submitted && form['firstname'].errors}">
                <div *ngIf="submitted && form['firstname'].errors" class="invalid-feedback">
                    First name is required.
                </div>
            </div>

            <!-- Lastname -->
            <div class="form-group">
                <label>Last Name</label>
                <input type="text" formControlName="lastname" class="form-control"
                    [ngClass]="{'is-invalid': submitted && form['lastname'].errors}">
                <div *ngIf="submitted && form['lastname'].errors" class="invalid-feedback">
                    Last name is required.
                </div>
            </div>


            <!-- Email -->
            <div class="form-group">
                <label>Email</label>
                <input type="email" formControlName="email" class="form-control"
                    [ngClass]="{'is-invalid': submitted && form['email'].errors}">
                <div *ngIf="submitted && form['email'].errors?.['required']" class="invalid-feedback">
                    Email is required.
                </div>
                <div *ngIf="submitted && form['email'].errors?.['email']" class="invalid-feedback">
                    Email is not valid.
                </div>
            </div>

            <!-- Password -->
            <div class="form-group">
                <label>Password</label>
                <input type="password" formControlName="password" class="form-control"
                    [ngClass]="{'is-invalid': submitted && form['password'].errors}">
                <div *ngIf="submitted && form['password'].errors" class="invalid-feedback">
                    Password is required.
                </div>
            </div>

            <button type="submit" class="btn btn-success">{{isUpdating ? 'Update User' : 'Register'}}</button>
        </form>
    </div>
    <div class="row" class="mt-4">
        <div class="col-md-6 offset-3">
            <h5>Submitted Users</h5>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users; index as i">
                        <th scope="row">{{i + 1}}</th>
                        <td>{{user.firstname}} {{user.lastname}}</td>
                        <td>{{user.email}}</td>
                        <td class="text-center mt-auto">
                            <button type="button" style="margin-right: 5px" class="btn btn-sm btn-success"
                                aria-label="Update" (click)="updateUser(user, i)">
                                <i class="bi bi-pencil-square"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-danger" aria-label="Delete"
                                (click)="deleteUser(i)">
                                <i class="bi bi-trash3-fill"></i>
                            </button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>